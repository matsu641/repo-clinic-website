<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>くわばら整形外科</title>
    <!-- CSS -->
    <link rel="stylesheet" href="style.css">
    <!-- Swiper.js（スライドショー用） -->
    <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css">
</head>
<body>
    <!-- ヘッダー -->
    <header>
        <div class="logo">
            <h1>くわばら整形外科</h1>
        </div>
        <nav>
            <ul>
                <li class="tab active" data-tab="home">ホーム</li>
                <li class="tab" data-tab="about">診療案内</li>
                <li class="tab" data-tab="rihab">リハビリ</li>
                <li class="tab" data-tab="access">アクセス</li>
            </ul>
        </nav>
    </header>

    <!-- コンテンツエリア -->
    <main>
        <!-- ホーム（スライドショー） -->
        <section id="home" class="tab-content active">
            <div class="swiper-container">
                <div class="swiper-wrapper">
                    <div class="swiper-slide">
                        <img src="images/clinic.jpg" alt="スライド1">
                        <div class="slide-caption">
                            <h2>安心の医療で皆様を支えます</h2>
                            <p>地域に根差したクリニック</p>
                        </div>
                    </div>
                    <div class="swiper-slide">
                        <img src="images/clinic2.jpg" alt="スライド2">
                        <div class="slide-caption">
                            <h2>体の再生と機能回復をサポート</h2>
                            <p>快適な診療環境を提供します</p>
                        </div>
                    </div>
                    <div class="swiper-slide">
                        <img src="images/clinic3.jpg" alt="スライド3">
                        <div class="slide-caption">
                            <h2>患者さんに寄り添った回復プログラム</h2>
                            <p>いつでもお気軽にご相談ください</p>
                        </div>
                    </div>
                </div>
                <div class="swiper-pagination"></div>
            </div>

            <div class="other">
                <h2>診療科目</h2>
                <ul>
                    <li>リウマチ科</li>
                    <li>整形外科</li>
                    <li>リハビリテーション科</li>
                </ul>
                <br>
                <h2>診療時間</h2>
                <table>
                    <tr>
                        <th>曜日</th>
                        <th>午前</th>
                        <th>午後</th>
                    </tr>
                    <tr>
                        <td>月〜金</td>
                        <td>8:00 - 12:00</td>
                        <td>14:50 - 19:00</td>
                    </tr>
                    <tr>
                        <td>土</td>
                        <td>8:00 - 12:00</td>
                        <td>14:00 - 17:00</td>
                    </tr>
                    <tr>
                        <td>休診日</td>
                        <td colspan="2">木曜日、祝祭日</td>
                    </tr>
                </table>

             
                <br>
                <p>当院では、予約された患者様を優先的に診察しておりますが、予約をされていない場合でも対応させていただきます。</p>
                
                <p>どうぞお気軽にご来院ください。</p>
                <br>
                <h2>お願い</h2>
                <ul>
                    <li>アイドリング駐車は近隣の迷惑になるのでおやめください</li>
                    <li>駐車場前の道路での停車は、渋滞の原因となるためご遠慮いただき、速やかに駐車場内へお入りください。</li>
                    <li>院内での携帯電話の利用はご遠慮ください</li>
                </ul>
                <br>
                <h2>お知らせ</h2>
                <ul>
                    <li>お知らせは今現在ありません。</li>
                    <br>
                </ul>
                <br>
            </div>
        </section>

        <!-- 診療案内（院長紹介と院内紹介） -->
        <section id="about" class="tab-content">
            <h2>院長紹介</h2>
            <div class="director">
                <img src="images/tipapa.jpg" alt="院長写真">
                <li>〇〇年　金沢大学医学部医学科卒業</li>
                <li>〇〇年　整形外科専門医資格取得</li>
            </div>

            <h2>院内の紹介</h2>
            <div class="facility-gallery">
                <div class="facility1">
                    <img src="images/reception.jpg" alt="受付">
                    <p> 受付 </p>
                </div>
                <div class="facility2">
                    <img src="images/waitingroom.jpg" alt="待合室">
                    <p> 待合室 </p>
                </div>
            </div>
        </section>

        <!-- リハビリ -->
        <section id="rihab" class="tab-content" style="text-align: center;">
            <div class="facility" style="display: flex; flex-direction: column; align-items: center;">
                <img src="images/rehab.jpg" alt="リハビリ室" style="max-width: 80%;">
                
                <h2>リハビリで使用する医療機器と適応症状</h2>
                <div class="rehab-box">
                    <h2>体外衝撃波（ESWT）</h2>
                <ul>
                    <li>足底筋膜炎</li>
                    <li>テニス肘・ゴルフ肘</li>
                    <li>石灰沈着性腱板炎（肩の痛み）</li>
                    <li>アキレス腱炎</li>
                    <li>ジャンパー膝（膝蓋腱炎）</li>
                    <li>慢性的な筋・腱の炎症</li>
                </ul>
                </div>
                
                
                <div class="rehab-box">
                    <h2>干渉波（低周波治療器）</h2>
                    <ul>
                        <li>肩こり・腰痛</li>
                        <li>坐骨神経痛</li>
                        <li>頚椎症・頚肩腕症候群</li>
                        <li>慢性関節リウマチ</li>
                        <li>神経痛（坐骨神経痛・肋間神経痛）</li>
                    </ul>
                </div>
        
                <div class="rehab-box">
                    <h2>超音波治療</h2>
                    <ul>
                        <li>捻挫・筋肉の損傷</li>
                        <li>腱鞘炎（ドケルバン病など）</li>
                        <li>骨折（治癒促進）</li>
                        <li>五十肩（肩関節周囲炎）</li>
                        <li>肉離れ</li>
                        <li>スポーツ障害（靭帯損傷・腱炎など）</li>
                    </ul>
                </div>
        
                <div class="rehab-box">
                    <h2>牽引治療（首・腰）</h2>
                    <ul>
                        <li>頚椎ヘルニア・腰椎ヘルニア</li>
                        <li>頚椎症・頚肩腕症候群</li>
                        <li>腰椎すべり症・分離症</li>
                        <li>坐骨神経痛</li>
                        <li>慢性腰痛</li>
                        <li>椎間板変性症</li>
                    </ul>
                </div>
        
                <div class="rehab-box">
                    <h2>マイクロ波治療</h2>
                    <ul>
                        <li>慢性腰痛・肩こり</li>
                        <li>変形性膝関節症</li>
                        <li>神経痛（坐骨神経痛・肋間神経痛）</li>
                        <li>筋肉のこわばり・関節のこわばり</li>
                        <li>リウマチによる関節痛</li>
                        <li>冷え症</li>
                    </ul>
                </div>
        
                <div class="rehab-box">
                    <h2>ウォーターベッド（ウォーターマッサージ）</h2>
                    <ul>
                        <li>全身の疲労・倦怠感</li>
                        <li>自律神経の乱れ（ストレス・不眠）</li>
                        <li>血行不良による肩こり・腰痛</li>
                        <li>足のむくみ</li>
                        <li>筋肉の緊張による頭痛</li>
                    </ul>
                </div>
        
                <div class="rehab-box">
                    <h2>骨折治療器（超音波骨折治療器）</h2>
                    <ul>
                        <li>骨折（治癒促進）</li>
                        <li>難治性骨折（偽関節）</li>
                        <li>疲労骨折</li>
                        <li>骨粗しょう症による骨折</li>
                        <li>手術後の骨癒合不全</li>
                    </ul>
                </div>
            </div>
            <p>※ 当院では理学療法士学生の実習を受け入れております。患者様にはご理解とご協力をお願い申し上げます。</p>
        </section>
        
        <!-- アクセス -->
        <section id="access" class="tab-content">
            <h2>アクセス</h2>
            <p>群馬総社駅から車で10分</p>
            <p>八木原駅から車で7分</p>
            <p>住所: 〒370-3601 群馬県北群馬郡吉岡町漆原1179 </p>
            <div id="map">
                <iframe 
                    src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3241.859359758356!2d138.97592381532206!3d36.456148180012215!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x601df1587a9b85a1%3A0x25d4d6b4c2df8b1!2z5b6z5Y-j5bGL6Kit5bSO5bGx5Y-j!5e0!3m2!1sja!2sjp!4v1682345678901!5m2!1sja!2sjp" 
                    width="100%" 
                    height="300" 
                    style="border:0;" 
                    allowfullscreen="" 
                    loading="lazy" 
                    referrerpolicy="no-referrer-when-downgrade">
                </iframe>
            </div>
            <h2>お問い合わせ</h2>
            <p>電話番号: 0279-25-8855</p>
            <br>
        </section>
    </main>

    <footer>
        <p>© 2025 くわばら整形外科 All Rights Reserved.</p>
    </footer>

    <!-- チャットボットアイコン -->
    <div id="chatbot-icon">💭</div>

    <!-- チャットウィンドウ -->
    <div id="chat-window">
        <div id="chat-header">AIチャットボット</div>
        <div id="chat-body">
            <p><strong>AI:</strong> 以下の中から関連する質問を選択してください:</p>
            <ul id="category-list">
                <li class="category-option">診療時間・休診日に関する質問</li>
                <li class="category-option">予約・受付に関する質問</li>
                <li class="category-option">診療科・医療サービスに関する質問</li>
                <li class="category-option">診療内容に関する具体的な質問</li>
                <li class="category-option">施設に関する質問</li>
                <li class="category-option">お問い合わせに関する質問</li>
                <li class="category-option">保険に関する質問</li>
            </ul>
        </div>
        <div id="chat-footer">
            <input type="text" id="userInput" placeholder="具体的な質問を入力してください" disabled>
            <button id="sendButton" disabled>送信</button>
        </div>
    </div>

    <!-- Swiper.js -->
    <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>

    <!-- メインスクリプト（タブ切り替え＋チャットボット） -->
    <script>
    document.addEventListener("DOMContentLoaded", () => {
        // ▼▼ タブ切り替え処理 ▼▼
        const tabs = document.querySelectorAll(".tab");
        const contents = document.querySelectorAll(".tab-content");

        tabs.forEach(tab => {
            tab.addEventListener("click", () => {
                // すべてのタブから active クラスを外す
                tabs.forEach(t => t.classList.remove("active"));
                // クリックしたタブに active クラスを付与
                tab.classList.add("active");

                // すべてのコンテンツから active クラスを外す
                contents.forEach(content => content.classList.remove("active"));
                // タブの data-tab 属性に対応する要素を表示
                document.getElementById(tab.dataset.tab).classList.add("active");
            });
        });

        // ▼▼ Swiper.jsの初期化 ▼▼
        const swiper = new Swiper('.swiper-container', {
            loop: true,
            autoplay: {
                delay: 5000,
                disableOnInteraction: false,
            },
            pagination: {
                el: '.swiper-pagination',
                clickable: true,
            },
            // ナビゲーションが必要なら下記を追加
            // navigation: {
            //     nextEl: '.swiper-button-next',
            //     prevEl: '.swiper-button-prev',
            // },
        });

        // ▼▼ チャットボット用の変数と処理 ▼▼
        const apiKey = "YOUR_OPENAI_API_KEY";  // OpenAIのAPIキーを設定
        const chatbotIcon = document.getElementById("chatbot-icon");
        const chatWindow = document.getElementById("chat-window");
        const chatBody = document.getElementById("chat-body");
        const userInput = document.getElementById("userInput");
        const sendButton = document.getElementById("sendButton");
        const categoryList = document.getElementById("category-list");

        let selectedCategory = "";

        // アイコンをクリックするとチャットウィンドウを表示/非表示にする
        chatbotIcon.addEventListener("click", () => {
            chatWindow.style.display = (chatWindow.style.display === "none" || chatWindow.style.display === "") 
                                       ? "flex" 
                                       : "none";
        });

        // カテゴリーがクリックされたときの動作
        categoryList.addEventListener("click", (event) => {
            if (event.target.classList.contains("category-option")) {
                selectedCategory = event.target.innerText;
                // カテゴリー選択のメッセージを表示
                chatBody.innerHTML += `<p><strong>AI:</strong> 「${selectedCategory}」に関する質問ですね。具体的な質問を入力してください。</p>`;
                // 入力フォームと送信ボタンを有効化
                userInput.disabled = false;
                sendButton.disabled = false;
            }
        });

        // 送信ボタンがクリックされたときの動作
        sendButton.addEventListener("click", async () => {
            const userQuestion = userInput.value.trim();
            if (!userQuestion) return;

            // 質問をチャット画面に表示
            chatBody.innerHTML += `<p><strong>あなた:</strong> ${userQuestion}</p>`;
            userInput.value = "";

            // FAQ用のJSONファイルを読み込む
            // （「faq.json」は任意で用意してください）
            const response = await fetch("faq.json");
            const faqData = await response.json();

            // 質問と類似するものを検索
            let answer = "すみません、その質問にはまだ対応していません。";  // 初期メッセージ
            faqData.forEach(faq => {
                // カテゴリーと質問文が合致しているかどうかでチェック
                if (faq.category === selectedCategory && userQuestion.includes(faq.question)) {
                    answer = faq.answer;
                }
            });

            // 回答をチャット画面に表示
            chatBody.innerHTML += `<p><strong>AI:</strong> ${answer}</p>`;

            // チャット画面を自動でスクロール
            chatBody.scrollTop = chatBody.scrollHeight;
        });
    });
    </script>
</body>
</html>
